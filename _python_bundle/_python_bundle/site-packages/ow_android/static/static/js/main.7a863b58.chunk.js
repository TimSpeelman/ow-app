(this["webpackJsonpow-react"]=this["webpackJsonpow-react"]||[]).push([[0],{106:function(e,t,n){e.exports=n.p+"static/media/qr-scan.c24fd00a.svg"},111:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(49),l=n.n(i),c=n(4),u=n(16),s=(n(33),n(34),n(1)),o=n(21),m=n.n(o),d=Object(a.createContext)({}),f=function(){return Object(a.useContext)(d)};function v(e){var t=Object(a.useState)(void 0),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){e().then(i)}),[]),r}var h=Object(a.createContext)({}),E=function(){return Object(a.useContext)(h)},p=n(22),b=function(e){e.children;var t=Object(p.a)(e,["children"]);return r.a.createElement("span",{className:"fas fa-".concat(Object.keys(t)[0])})},g=function(){var e=f(),t=e.open,n=e.setOpen;return r.a.createElement(y,{toggleMenu:function(e){return n(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.find((function(e){return!0===e||!1===e}))||!1}(e,t))},isOpen:t})},y=function(e){var t=e.toggleMenu,n=e.isOpen,i=E(),l=i.services,u=i.path,o=v((function(){return l.ipv8Service.api.getMyId().catch((function(e){return console.error(e)}))})),d=Object(a.useState)([]),f=Object(s.a)(d,2),h=f[0],p=f[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return p(l.ipv8Service.observer.peerPoller.cache)}),300);return function(){return clearInterval(e)}})),r.a.createElement("div",{className:m()({"side-menu-open":n})},r.a.createElement("div",{className:"side-menu-close",onClick:function(){return t(!1)}},r.a.createElement(b,{times:!0})),r.a.createElement("div",{className:"side-menu-backdrop",onClick:function(){return t(!1)}}),r.a.createElement("div",{className:"side-menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/attestations",onClick:function(){return t(!1)}},r.a.createElement(b,{"id-card":!0}),r.a.createElement("span",null,"Credentials"))),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/contacts",onClick:function(){return t(!1)}},r.a.createElement(b,{users:!0}),r.a.createElement("span",null,"Contacts"))),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/",onClick:function(){return t(!1)},className:"disabled"},r.a.createElement(b,{"info-circle":!0}),r.a.createElement("span",null,"About"))),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/",onClick:function(){return t(!1)},className:"disabled"},r.a.createElement(b,{cog:!0}),r.a.createElement("span",null,"Settings"))),r.a.createElement("p",null,r.a.createElement("strong",null,"Debug Information:")),r.a.createElement("p",null,"Using agent: ",u),r.a.createElement("p",null,"Using mid: ",o),r.a.createElement("p",null,"Known peers: ",h.length," (",h.map((function(e){return e.substr(0,5)})).join(", "),")"))))},O=function(e){var t=e.onClick,n=e.isPending,a=e.primary,i=e.children,l=Object(p.a)(e,["onClick","isPending","primary","children"]);return r.a.createElement("button",Object.assign({},l,{onClick:t,className:m()(["btn",{pending:n,primary:a,secondary:!a}])}),r.a.createElement("span",null,i),r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},k=n(23),N=n.n(k),S=n(52),j=n.n(S),w=function(e){return r.a.createElement("div",{className:"card-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"logo-box"},r.a.createElement("img",{style:{width:"80%"},src:e.imageUrl,alt:""})),r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title),r.a.createElement("div",{className:"secondary"},e.issuerName)),e.withQRs?r.a.createElement("div",{className:"tool"},r.a.createElement("span",{onClick:function(){return e.onDisplayQR&&e.onDisplayQR(e.title)}},r.a.createElement(b,{qrcode:!0}))):""),e.showDetails?r.a.createElement("div",{className:"credential-details"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title),r.a.createElement("div",{className:"secondary"},e.value)),e.withQRs?r.a.createElement("div",{className:"tool"},r.a.createElement("span",{onClick:function(){return e.onDisplayQR&&e.onDisplayQR(e.title)}},r.a.createElement(b,{qrcode:!0}))):"")):"",e.withQRs&&e.qrValue?r.a.createElement("div",{className:"qr-code"},r.a.createElement(j.a,{text:e.qrValue},r.a.createElement(N.a,{value:e.qrValue,size:256,level:"M"}))):"",e.showMeta?r.a.createElement("div",{className:"credential-meta"},r.a.createElement("table",null,r.a.createElement("tbody",null,(e.metadata||[]).map((function(e){return r.a.createElement("tr",{key:e.key.toString()},r.a.createElement("td",null,e.key),r.a.createElement("td",null,e.value))}))))):"")},R=function(e){var t=f().setOpen;return r.a.createElement(C,Object.assign({openMenu:function(){return t(!0)}},e))},C=function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"content"},r.a.createElement(c.b,{className:"back-arrow",to:e.backUrl},r.a.createElement(b,{"chevron-left":!0})),r.a.createElement("div",{className:"page-title"},e.pageTitle),r.a.createElement("div",{className:"burger-menu",onClick:e.openMenu},r.a.createElement(b,{bars:!0}))),r.a.createElement("div",{className:"background"})),r.a.createElement("div",{className:"after-header"}," "))},I=n(25),T=Object(a.createContext)({}),D=function(){return Object(a.useContext)(T)};var _=function(e){var t=e.request,n=e.onSubmitConsent,i=(D().fromLanguageDict,Object(a.useState)(!1)),l=Object(s.a)(i,2),c=l[0],u=l[1],o=function(e){u(!0),n(e)},m={success:t.resolve.attributes.filter((function(e){return"success"===e.status})).map((function(e){return e.results[0]})),ambiguous:t.resolve.attributes.filter((function(e){return"ambiguous"===e.status})),missing:t.resolve.attributes.filter((function(e){return"missing"===e.status}))};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Consent to Share",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Do you wish to share?"),m.missing.length>0&&r.a.createElement("div",null,r.a.createElement("p",null,"You are missing the following attributes:"),r.a.createElement("ul",null,m.missing.map((function(e){return r.a.createElement("li",null,e.request.name)})))),r.a.createElement("p",null,"X requires the following information:"),m.success.map((function(e){return r.a.createElement(w,{key:e.hash,title:e.name,issuerName:e.signer_mid_b64,imageUrl:"",value:e.value,showDetails:!0})})),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement(O,{onClick:function(){return o(!0)},isPending:c,primary:!0},"Share these credentials"),r.a.createElement(O,{onClick:function(){return o(!1)},disabled:c},"Do not share")))},q=function(){return r.a.createElement(_,{onSubmitConsent:function(){},request:{request:{attributes:[],verifier_id:"VRFID"},resolve:{status:"success",attributes:[{status:"success",ref:"a",request:{name:"name",format:"id_metadata",ref:"a"},results:[{hash:"xsd",value:"Tim Speelman",format:"id_metadata",name:"name",signer_mid_b64:"xyz",metadata:1}],responses:[{hash:"xsd",ref:"a"}]},{status:"success",ref:"a",request:{name:"age",format:"id_metadata",ref:"a"},results:[{hash:"xsd",value:"28",format:"id_metadata",name:"age",signer_mid_b64:"xyz",metadata:1}],responses:[{hash:"xsd",ref:"a"}]}]}}})},A=function(e){return r.a.createElement("select",{value:e.value,onChange:function(t){return e.onChange(t.target.value)}},e.emptyMessage?r.a.createElement("option",{value:"",disabled:!0,hidden:!0},e.emptyMessage):"",e.options.map((function(e){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))},P=Object(a.createContext)({}),x=function(){return Object(a.useContext)(P)},U=function(e){var t,n=e.onSubmitRequest,i=D().langCode,l=x().state,u=E().services,o=Object(a.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],v=Object(a.useState)(""),h=Object(s.a)(v,2),p=h[0],b=h[1],g=Object(a.useState)(!1),y=Object(s.a)(g,2),k=y[0],N=y[1];Object(a.useEffect)((function(){return b("")}),[d]);var S=Object(a.useState)([]),j=Object(s.a)(S,2),w=j[0],C=j[1];Object(a.useEffect)((function(){var e=setInterval((function(){return C(u.ipv8Service.observer.peerPoller.cache)}),300);return function(){return clearInterval(e)}}));var I=Object(a.useMemo)((function(){return function(e,t){return Object.keys(e).map((function(n){return{value:e[n].id,label:e[n].title[t]}})).sort((function(e,t){return e.label>t.label?-1:1}))}(l.providers,i)}),[l.providers,i]),T=Object(a.useMemo)((function(){return function(e,t,n){var a=e[t];return a?Object.values(a.recipes).map((function(e){return{value:e.name,label:e.title[n]}})).sort((function(e,t){return e.label>t.label?-1:1})):[]}(l.providers,d,i)}),[l.providers,d,i]),_=0===w.length?"No peers known!":""==d?"":l.providers[d]?w.indexOf(l.providers[d].mid_b64)>=0?"Provider Online":"Provider Offline":"Unknown provider selected",q=w.indexOf(null===(t=l.providers[d])||void 0===t?void 0:t.mid_b64)>=0;return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Request Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Request new credentials"),0===I.length?r.a.createElement("div",null,r.a.createElement("p",null,"You don't know any providers yet.. Please add one to your contacts first."),r.a.createElement(c.b,{to:"/contacts"},r.a.createElement(O,{primary:!0},"Go to contacts"))):r.a.createElement("div",null,r.a.createElement("p",null,"Please pick a provider and the credential you wish to obtain."),r.a.createElement(A,{options:I,value:d,onChange:f,emptyMessage:"Select a provider please"})),d?r.a.createElement(A,{options:T,value:p,onChange:b,emptyMessage:"Select your attribute"}):"",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,_),d&&p?r.a.createElement(O,{onClick:function(){N(!0),n(d,p)},isPending:k,disabled:!q||!d||!p},"Request Attribute"):""))};var M=function(e){var t=e.pageTitle,n=e.messageTitle,a=e.messageBody;return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:t,backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,n),r.a.createElement("p",null,a),r.a.createElement(c.b,{to:"/"},r.a.createElement(O,null,"OK"))))},L=null;function V(e){var t=x();return L!==t.state&&console.log("useSelector: STATE updated"),L=t.state,e(t.state)}var F=n(12);function H(e,t){var n,a;return function(r){return void 0!==n&&n===r?a:(n=r,a=e.apply(t,[r]))}}function B(e){return e.attributes.map((function(t){return Object(F.a)({},t,{provider:K(t.signer_mid_b64)(e)})}))}function Q(e){return Object.values(e.providers)}function K(e){return H((function(t){return Object.values(t.providers).find((function(t){return t.mid_b64===e}))}),null)}var W,Y,G=function(e){var t=e.receiveRequest,n=e.onSubmitConsent,i=D().fromLanguageDict,l=V(K(t.provider)),c=Object(a.useState)(!1),u=Object(s.a)(c,2),o=u[0],m=u[1],d=t.attributes,f=function(e){m(!0),n(e)};return t?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Receive Credentials",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Step 2: Save New Credentials"),r.a.createElement("p",null,i(l.title)," offers you the following credentials:"),d.map((function(e){return r.a.createElement(w,{key:e.name,title:i(e.title),issuerName:i(l.title),imageUrl:l.logo_url,value:e.value,showDetails:!0,showMeta:!0,metadata:[{key:"Signed by",value:i(l.title)},{key:"Created at",value:"2018-09-01 13:20:00 CET"},{key:"Valid until",value:"2020-09-01 13:20:00 CET"}]})})),r.a.createElement("p",null,"Do you wish to save these credentials?"),r.a.createElement(O,{onClick:function(){return f(!0)},primary:!0,isPending:o},"Save these credentials"),r.a.createElement(O,{onClick:function(){return f(!1)},disabled:o},"Do not save"))):r.a.createElement("div",null,"...ReceiveAttributesPage...")},z=function(e){var t=e.shareRequest,n=e.onSubmitConsent,i=D().fromLanguageDict,l=V(K(t.receiver)),c=V(B),u=t.attributeNames.map((function(e){return c.find((function(t){return t.name===e}))})).filter((function(e){return!!e})),o=Object(a.useState)(!1),m=Object(s.a)(o,2),d=m[0],f=m[1],v=function(e){f(!0),n(e)};return l?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Request Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Step 1: Share Information"),r.a.createElement("p",null,i(l.title)," requires the following information:"),u.map((function(e){return e?r.a.createElement(w,{key:e.hash,title:i(e.title),issuerName:i(e.provider.title),imageUrl:e.provider.logo_url,value:e.value,showDetails:!0}):""})),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement(O,{onClick:function(){return v(!0)},isPending:d,primary:!0},"Share these credentials"),r.a.createElement(O,{onClick:function(){return v(!1)},disabled:d},"Do not share"))):r.a.createElement("div",null,"...ShareRequestPage No Provider...")},J=n(11),X=n.n(J),$=n(2),Z=n(3),ee=function(){function e(){Object($.a)(this,e),this.listeners=[]}return Object(Z.a)(e,[{key:"fire",value:function(e){this.listeners.forEach((function(t){return t(e)}))}},{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){return t.unsubscribe(e)}}},{key:"pipe",value:function(e){return this.on((function(t){return e.fire(t)}))}},{key:"unsubscribe",value:function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))}}]),e}();!function(e){e[e.INIT=0]="INIT",e[e.SHARE=1]="SHARE",e[e.RECEIVE=2]="RECEIVE",e[e.DONE=3]="DONE"}(W||(W={})),function(e){e[e.PENDING=0]="PENDING",e[e.COMPLETE=1]="COMPLETE",e[e.ABORTED=2]="ABORTED",e[e.FAILED=3]="FAILED"}(Y||(Y={}));var te,ne=function(){function e(t,n,a){Object($.a)(this,e),this.providersService=t,this.walletService=n,this.attributeService=a,this.step=W.INIT,this.status=Y.PENDING,this.hookStep=new ee,this.hookUserConsentToReceive=new ee,this.hookStatus=new ee,this.providerKey=void 0,this.procedureKey=void 0,this.message="",this.receiveRequest=null}return Object(Z.a)(e,[{key:"userStartsRequest",value:function(e,t){this.providerKey=e,this.procedureKey=t,this.requirements&&0===this.requirements.length?this.executeProcedure():this.askUserToShare()}},{key:"userConsentsToShare",value:function(e){e?this.executeProcedure():this.abortProcedure()}},{key:"userConsentsToReceive",value:function(e){this.hookUserConsentToReceive.fire(e),e?this.saveReceivedCredentials():this.abortProcedure()}},{key:"askUserToShare",value:function(){this.setStep(W.SHARE)}},{key:"executeProcedure",value:function(){var e,t,n,a,r=this;return X.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.providerKey,t=this.procedureKey,e&&t){i.next=3;break}return i.abrupt("return");case 3:return n=function(e){return r.askUserToReceive(e),new Promise((function(e){return r.hookUserConsentToReceive.on(e)}))},i.prev=4,i.next=7,X.a.awrap(this.walletService.requestOWAttestSharingApproved(e,t,n));case 7:if(!(a=i.sent)){i.next=16;break}return a.forEach((function(e){return r.attributeService.storeAttribute(e)})),this.showMessage("The attributes were successfully added to your identity."),this.setStatus(Y.COMPLETE),this.done(),i.abrupt("return",a);case 16:return this.showMessage("The attributes were not added to your identity."),this.setStatus(Y.ABORTED),this.done(),i.abrupt("return",[]);case 20:i.next=27;break;case 22:i.prev=22,i.t0=i.catch(4),this.showMessage("Something went wrong"),console.error("Something went wrong",i.t0),this.setStatus(Y.FAILED);case 27:case"end":return i.stop()}}),null,this,[[4,22]])}},{key:"askUserToReceive",value:function(e){var t;console.log("Asking user",e),this.receiveRequest={attributes:e,done:function(){},id:"",provider:null===(t=this.provider)||void 0===t?void 0:t.mid_b64,reason:"You asked for them"},this.setStep(W.RECEIVE)}},{key:"saveReceivedCredentials",value:function(){}},{key:"done",value:function(){this.setStep(W.DONE)}},{key:"abortProcedure",value:function(){this.setStatus(Y.ABORTED),this.setStep(W.DONE)}},{key:"showMessage",value:function(e){this.message=e}},{key:"setStep",value:function(e){this.step=e,this.hookStep.fire(e)}},{key:"setStatus",value:function(e){this.status=e,this.hookStatus.fire(e)}},{key:"provider",get:function(){return this.providerKey?this.providersService.providers[this.providerKey]:null}},{key:"procedure",get:function(){return this.provider&&this.procedureKey&&this.provider.recipes[this.procedureKey]}},{key:"requirements",get:function(){var e;return this.procedure&&((null===(e=this.procedure.verify_request)||void 0===e?void 0:e.attributes)||[]).map((function(e){return e.name}))}},{key:"shareRequest",get:function(){return this.requirements?{attributeNames:this.requirements,done:function(){},id:"",reason:"Some reason",receiver:this.provider.mid_b64}:null}}]),e}(),ae=n(20),re=n(6),ie=n.n(re),le=n(57),ce=function(){function e(t){Object($.a)(this,e),this.state=t}return Object(Z.a)(e,[{key:"storeAttribute",value:function(e){var t=this.state;this.state.store({attributes:[].concat(Object(I.a)(t.attributes),[e])})}},{key:"attributes",get:function(){return this.state.attributes}}]),e}(),ue=function(){function e(t){Object($.a)(this,e),this.axios=t}return Object(Z.a)(e,[{key:"getState",value:function(){return this.axios.get("/state").then((function(e){return e.data}))}},{key:"putState",value:function(e){return this.axios.put("/state",e)}}]),e}(),se=function(){function e(t){Object($.a)(this,e),this.localApi=t,this.stateChangeHook=new ee,this.defaultState={attributes:[],providers:{}},this._state=this.defaultState,this.fetch()}return Object(Z.a)(e,[{key:"state",get:function(){return this._state}},{key:"attributes",get:function(){return this._state.attributes}},{key:"providers",get:function(){return this._state.providers}}]),Object(Z.a)(e,[{key:"fetch",value:function(){var e=this;return this.localApi.getState().then((function(t){t?e.updateState(t):(console.log("Local state is empty, creating default"),e.store(e.defaultState))}))}},{key:"store",value:function(e){return this.updateState(e),this.localApi.putState(this.state)}},{key:"updateState",value:function(e){this._state=Object(F.a)({},this.state,{},e),console.log("UPDATED LOCAL STATE",this._state),this.stateChangeHook.fire(this.state)}}]),e}(),oe=n(8),me=function(){function e(t,n,a,r){Object($.a)(this,e),this.providersService=t,this.localState=n,this.ipv8=a,this.recipeClient=r}return Object(Z.a)(e,[{key:"requestOWAttestSharingApproved",value:function(e,t,n){var a,r,i,l,c,u,s,o,m,d,f,v,h,E;return X.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r=this.providersService.providers[e],i=r.recipes[t],l=((null===(a=i.verify_request)||void 0===a?void 0:a.attributes)||[]).map((function(e){return e.name})),c=this.localState.attributes.filter((function(e){return l.indexOf(e.name)>=0})).reduce((function(e,t){return Object(F.a)({},e,Object(oe.a)({},t.name,t.value))}),{}),s=this.recipeClient.createProcess(i),p.next=7,X.a.awrap(this.ipv8.api.listAttestations());case 7:return o=p.sent,i.verify_request&&(u={attributes:null===(m=i.verify_request)||void 0===m?void 0:m.attributes.map((function(e,t){var n;return{hash:(null===(n=o.find((function(t){return t.attribute_name===e.name})))||void 0===n?void 0:n.attribute_hash)||"",ref:e.name,value:c[e.name]}})),request_hash:"",subject_id:this.recipeClient.myId},s.allowVerification(u)),d=s.createRequest(u),p.next=12,X.a.awrap(ie.a.post(i.service_endpoint,{request:d}));case 12:if(f=p.sent,v=f.data.offer,h=v.attributes.map((function(e){var t;return{name:e.name,value:e.value,title:(null===(t=i.attributes.find((function(t){return t.name===e.name})))||void 0===t?void 0:t.title)||{},signer_mid_b64:v.attester_id}})),s.validateOffer(v)){p.next=18;break}return console.warn("Server offer did not pass validation"),p.abrupt("return",[]);case 18:return p.next=20,X.a.awrap(n(h));case 20:if(p.sent){p.next=23;break}return p.abrupt("return",[]);case 23:return p.next=25,X.a.awrap(s.requestAttestation(v));case 25:if(E=p.sent,console.log("Received result",E),E){p.next=29;break}return p.abrupt("return",[]);case 29:return p.abrupt("return",E.map((function(e){var t=i.attributes.find((function(t){return t.name===e.name}));if(e&&t)return{name:e.name,value:e.value,hash:e.hash,time:Date.now(),provider_title:r.title,title:t.title,type:t.format,metadata:e.metadata,signer_mid_b64:e.signer_mid_b64};throw new Error("Attestation or procedure not found")})));case 30:case"end":return p.stop()}}),null,this)}}]),e}();!function(e){e[e.ONLINE=0]="ONLINE",e[e.PENDING=1]="PENDING",e[e.OFFLINE=2]="OFFLINE"}(te||(te={}));var de=function(){function e(t){Object($.a)(this,e),this.state=t,this.online={}}return Object(Z.a)(e,[{key:"checkIsOnline",value:function(e){return e in this.online?this.online[e]===te.ONLINE:(this.pingForOnline(e),!1)}},{key:"pingForOnline",value:function(e){var t,n=this;return this.online[e]=te.PENDING,Promise.race([this.getByURL(this.state.providers[e].url).then((function(){return!0})).catch((function(){return!1})),(t=1e3,new Promise((function(e){return setTimeout(e,t)}))).then((function(){return!1}))]).then((function(t){n.online[e]=t?te.ONLINE:te.OFFLINE}))}},{key:"getByURL",value:function(e){return ie.a.get(e).then((function(e){return e.data}))}},{key:"addByURL",value:function(e){var t=this;return this.getByURL(e).then((function(e){return t.addOrUpdate(e),e}))}},{key:"addOrUpdate",value:function(e){var t=this.state;return this.state.store({providers:Object(F.a)({},t.providers,Object(oe.a)({},e.id,e))})}},{key:"providers",get:function(){return this.state.providers}}]),e}(),fe=n(54),ve=n.n(fe),he=function(){function e(){Object($.a)(this,e),this.hook=new ee,this.index=0,this.intervalHandle=null}return Object(Z.a)(e,[{key:"listen",value:function(e){this.hook.on(e)}},{key:"start",value:function(e){var t=this;this.intervalHandle=setInterval((function(){return t.hook.fire(t.index++)}),e)}},{key:"stop",value:function(){clearInterval(this.intervalHandle)}}]),e}(),Ee=function(){function e(t){Object($.a)(this,e),this.options=t,this.handles=[]}return Object(Z.a)(e,[{key:"register",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new pe(e,Object(F.a)({},this.options,{},n));return this.handles.push(a),a.onDestroy((function(){return t.removeHandle(a)})),a}},{key:"resolveReference",value:function(e){return this.handles.find((function(t){return t.references.find((function(t){return t.id===e.id}))}))}},{key:"removeHandle",value:function(e){this.handles=this.handles.filter((function(t){return t!==e}))}}]),e}(),pe=function(){function e(t,n){var a=this;Object($.a)(this,e),this.value=t,this.options=n,this.references=[],this.freshRefHook=new ee,this.invalidationHook=new ee,this.destroyHook=new ee,this.interval=new he,this.interval.listen((function(){return a.createNewReference()}))}return Object(Z.a)(e,[{key:"onNewReference",value:function(e){return this.freshRefHook.on(e)}},{key:"onInvalidate",value:function(e){return this.invalidationHook.on(e)}},{key:"onDestroy",value:function(e){return this.destroyHook.on(e)}},{key:"refreshAtInterval",value:function(e){this.createNewReference(),this.interval.start(e)}},{key:"stopRefreshing",value:function(){this.interval.stop()}},{key:"destroy",value:function(){var e=this;this.stopRefreshing(),this.references.forEach((function(t){return e.expireReference(t)})),this.destroyHook.fire()}},{key:"createNewReference",value:function(){var e=this,t={id:ve()()};this.references.push(t),setTimeout((function(){return e.expireReference(t)}),this.options.millisToExpire),this.freshRefHook.fire(t)}},{key:"expireReference",value:function(e){this.references.find((function(t){return t===e}))&&(this.references=this.references.filter((function(t){return t!==e})),this.invalidationHook.fire(e),this.options.destroyWhenNoReferences&&0===this.references.length&&this.destroy())}}]),e}(),be=window.location.hash.match(/port=([0-9]+)/),ge=new le.a,ye=(be?be[1]:null)||ge.get("port")||"8124";ge.set("port",ye);var Oe="http://localhost:".concat(ye),ke=new ue(ie.a.create({baseURL:Oe})),Ne=new se(ke),Se=new ce(Ne),je=new ae.a.IPv8Service(Oe,1e3);je.start();var we=new Ee({destroyWhenNoReferences:!0,millisToExpire:2e4});window.peercalls=function(e,t){var n=we.resolveReference({id:t});n?(console.log("Peer '".concat(e,"' called. Handle found!")),n.value(e)):console.log("Peer '".concat(e,"' called. Could not find handle.."))};var Re,Ce,Ie=null,Te=null;!function(e){e[e.INIT=0]="INIT",e[e.SHARE=1]="SHARE",e[e.RECEIVE=2]="RECEIVE",e[e.DONE=3]="DONE"}(Re||(Re={}));var De,_e,qe=function(){var e=Object(a.useState)(Re.INIT),t=Object(s.a)(e,2),n=t[0],i=t[1];switch(Object(a.useEffect)((function(){setTimeout((function(){(Ce=new ne(Ie,Te,Se)).hookStep.on((function(e){console.log(e),i(e)}))}),2e3)}),[]),n){case Re.INIT:return r.a.createElement(U,{onSubmitRequest:function(e,t){return Ce.userStartsRequest(e,t)}});case Re.SHARE:return r.a.createElement(z,{shareRequest:Ce.shareRequest,onSubmitConsent:function(e){return Ce.userConsentsToShare(e)}});case Re.RECEIVE:return r.a.createElement(G,{receiveRequest:Ce.receiveRequest,onSubmitConsent:function(e){return Ce.userConsentsToReceive(e)}});case Re.DONE:return r.a.createElement(M,{messageBody:Ce.message,messageTitle:Ce.status===Y.COMPLETE?"Success":"No success",pageTitle:"Create"});default:return r.a.createElement("div",null,"This should not happen")}},Ae=function(e){var t=e.verificationOffer,n=e.onSubmitConsent,i=Object(a.useState)(!1),l=Object(s.a)(i,2),c=l[0],u=l[1],o=function(e){u(!0),n(e)};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Verify a Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Verifying by QR"),r.a.createElement("p",null,"Do you wish to verify the following?"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Member ID"),r.a.createElement("td",null,t.mid)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Name"),r.a.createElement("td",null,t.attribute_name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Hash"),r.a.createElement("td",null,t.attribute_hash)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Value"),r.a.createElement("td",null,t.attribute_value)))),r.a.createElement(O,{onClick:function(){return o(!0)},isPending:c,primary:!0},"Verify"),r.a.createElement(O,{onClick:function(){return o(!1)},disabled:c},"Cancel")))};!function(e){e[e.INIT=0]="INIT",e[e.CONFIRM=1]="CONFIRM",e[e.DONE=2]="DONE"}(De||(De={})),function(e){e[e.PENDING=0]="PENDING",e[e.COMPLETE=1]="COMPLETE",e[e.ABORTED=2]="ABORTED",e[e.FAILED=3]="FAILED"}(_e||(_e={}));var Pe,xe,Ue=function(){function e(t,n){Object($.a)(this,e),this.walletService=t,this.verifierService=n,this.step=De.INIT,this.status=_e.PENDING,this.hookStep=new ee,this.hookStatus=new ee,this.offer=void 0,this.message=""}return Object(Z.a)(e,[{key:"userStartsRequest",value:function(e){this.offer=e,this.setStep(De.CONFIRM)}},{key:"userConsentsToVerify",value:function(e){e?this.executeProcedure():this.abortProcedure()}},{key:"executeProcedure",value:function(){var e=this;return X.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.verifierService.verify(this.offer.mid,[{attribute_hash:this.offer.attribute_hash,attribute_value:this.offer.attribute_value,attribute_name:this.offer.attribute_name}]).then((function(t){e.showVerificationResult(t)}));case 1:case"end":return t.stop()}}),null,this)}},{key:"showVerificationResult",value:function(e){this.showMessage("The result was: "+(e?"verified!":"unverified..")),this.done()}},{key:"done",value:function(){this.setStep(De.DONE)}},{key:"abortProcedure",value:function(){this.showMessage("We have not verified the credential."),this.setStatus(_e.ABORTED),this.setStep(De.DONE)}},{key:"showMessage",value:function(e){this.message=e}},{key:"setStep",value:function(e){this.step=e,this.hookStep.fire(e)}},{key:"setStatus",value:function(e){this.status=e,this.hookStatus.fire(e)}}]),e}();!function(e){e[e.INIT=0]="INIT",e[e.CONFIRM=1]="CONFIRM",e[e.DONE=2]="DONE"}(Pe||(Pe={}));var Me,Le=function(e){var t=e.verifyOffer,n=Object(a.useState)(Pe.INIT),i=Object(s.a)(n,2),l=i[0],c=i[1],u=E().services;Object(a.useEffect)((function(){(xe=new Ue(u.owService,u.ipv8Service.verifierService)).hookStep.on((function(e){console.log(e),c(e)})),xe.userStartsRequest(t)}),[]);switch(l){case Pe.INIT:return r.a.createElement("div",null);case Pe.CONFIRM:return r.a.createElement(Ae,{onSubmitConsent:function(e){return xe.userConsentsToVerify(e)},verificationOffer:xe.offer});case Pe.DONE:return r.a.createElement(M,{pageTitle:"Verify a Credential",messageTitle:"Verification Result",messageBody:xe.message});default:return r.a.createElement("div",null,"This should not happen")}};!function(e){e.Succeeded="Succeeded",e.Failed="Failed",e.Unmatched="Unmatched"}(Me||(Me={}));var Ve=function(){function e(t){Object($.a)(this,e),this.decoders=t}return Object(Z.a)(e,[{key:"decode",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.decoders[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var l=r.value.decode(e);if(l.status===Me.Succeeded)return l;if(l.status===Me.Failed)return l}}catch(c){n=!0,a=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return{status:Me.Unmatched}}}]),e}(),Fe=function(){function e(t,n){Object($.a)(this,e),this.decodeA=t,this.decodeB=n}return Object(Z.a)(e,[{key:"decode",value:function(e){var t=this.decodeA.decode(e);return t.status===Me.Succeeded?this.decodeB.decode(t.result):t}}]),e}(),He=n(26),Be=n(24),Qe=n(27),Ke=function(e){function t(){return Object($.a)(this,t),Object(He.a)(this,Object(Be.a)(t).apply(this,arguments))}return Object(Qe.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t={provider:{title:{},description:{}}};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Add Contact (QR)",backUrl:"/contacts"}),r.a.createElement("main",null,r.a.createElement("p",null,"Do you trust the following organization?"),r.a.createElement("img",{src:"{ request.provider.logo_url }",style:{width:"20% "},alt:""}),r.a.createElement("h1",null,t.provider.title[""]),r.a.createElement("p",null,t.provider.description[""]),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("td",null,t.provider.mid_b64)),r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,t.provider.website)),r.a.createElement("tr",null,r.a.createElement("th",null,"Attestation Server URL"),r.a.createElement("td",null,t.provider.url))),r.a.createElement(O,{primary:!0,onClick:function(){return e.confirmRequest()},disabled:!1},"Trust and add to contacts"),r.a.createElement(O,{onClick:function(){return e.denyRequest()},disabled:!1},"Cancel")))}},{key:"confirmRequest",value:function(){}},{key:"denyRequest",value:function(){}}]),t}(r.a.Component),We=function(e){function t(){return Object($.a)(this,t),Object(He.a)(this,Object(Be.a)(t).apply(this,arguments))}return Object(Qe.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Verification Request",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Someone wishes to verify"),r.a.createElement("p",null,{provider:{title:{},description:{}}}.mid," wishes to verify your information:"),r.a.createElement(w,{title:"Age",issuerName:"Staat der Nederlanden",imageUrl:"",value:"28",showDetails:!0}),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement("button",{className:"btn primary",onClick:function(){return e.confirmRequest()},disabled:!1},"Share and continue"),r.a.createElement("button",{className:"btn secondary",onClick:function(){return e.denyRequest()},disabled:!1},"Cancel")))}},{key:"confirmRequest",value:function(){}},{key:"denyRequest",value:function(){}}]),t}(r.a.Component),Ye=function(e){var t=e.providerMid,n=D().fromLanguageDict,a=V(K(t));return a?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Contact",backUrl:"/contacts"}),r.a.createElement("main",null,r.a.createElement("img",{src:a.logo_url,alt:n(a.title)}),r.a.createElement("h1",null,n(a.title)),r.a.createElement("p",null,n(a.description)),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("td",null,a.mid_b64)),r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,a.website)),r.a.createElement("tr",null,r.a.createElement("th",null,"Attestation Server URL"),r.a.createElement("td",null,r.a.createElement("a",{href:a.url+"/about"},a.url))))),r.a.createElement("h2",null,"Credentials"),r.a.createElement("p",null,n(a.title)," offers the following credentials:"),Object.values(a.recipes).map((function(e){return r.a.createElement(w,{imageUrl:a.logo_url,title:n(e.title),issuerName:n(a.title),key:e.name})})))):r.a.createElement("div",null,"Oops! Provider not found")},Ge=function(e){return r.a.createElement("div",{className:"card-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"logo-box"},r.a.createElement("img",{src:e.logoUrl,alt:""})),r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title)),r.a.createElement("div",{className:"tool"},r.a.createElement("div",{className:"clickable"},r.a.createElement(b,{"info-circle":!0})))))},ze=function(){var e=D().fromLanguageDict,t=E().services,n=V(Q),i=Object(a.useState)("http://localhost"),l=Object(s.a)(i,2),u=l[0],o=l[1],m=Object(a.useState)(!1),d=Object(s.a)(m,2),f=d[0],v=d[1];return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Contacts",backUrl:"/"}),r.a.createElement("main",null,r.a.createElement("h1",null,"People (",0,")"),r.a.createElement("small",null,"No people yet.."),r.a.createElement("h1",null,"Organisations (",n.length,")"),n.map((function(t){return r.a.createElement(c.b,{to:"/contacts/".concat(encodeURIComponent(t.mid_b64)),key:t.mid_b64},r.a.createElement(Ge,{logoUrl:t.logo_url,title:e(t.title)}))})),r.a.createElement("h1",null,"Add By URL"),r.a.createElement("form",{onSubmit:function(){return function(e){var n;v(!0),null===(n=t.providersService)||void 0===n||n.addByURL(e).then((function(){o("http://localhost")})).catch((function(e){alert("Failed to add that provider")})).finally((function(){return v(!1)}))}(u)}},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("input",{type:"url",className:"text-input",placeholder:"Enter the URL of the provider",required:!0,value:u,onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O,{type:"submit",primary:!0,isPending:f},"Add Contact")))))},Je=function(e){return r.a.createElement("div",{className:"bottom-tools"},e.showQR?r.a.createElement(c.b,{to:"/qr"},r.a.createElement("div",{className:"fab-btn primary bottom-center",style:{fontSize:"3em"}},r.a.createElement("img",{src:n(106),alt:"",style:{width:"50%"}}))):"",e.showPlus?r.a.createElement(c.b,{className:"fab-btn secondary bottom-right",style:{fontSize:"2em"},to:"/create"},r.a.createElement(b,{plus:!0})):"")};var Xe,$e=function e(t,n){Object($.a)(this,e),this.type=t,this.payload=n},Ze=function(e){return{status:Me.Succeeded,result:e}},et=function(e){return{status:Me.Failed,error:e}};!function(e){e.INVALID_FORMAT="INVALID_FORMAT",e.INVALID_PAYLOAD="INVALID_PAYLOAD",e.UNMATCHED_TYPE="UNMATCHED_TYPE"}(Xe||(Xe={}));var tt=function(){function e(t,n){Object($.a)(this,e),this.decoder=void 0,this.decoder=new Fe(t,new Ve(n))}return Object(Z.a)(e,[{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),nt=function(){function e(){Object($.a)(this,e)}return Object(Z.a)(e,[{key:"encode",value:function(e){return e.type+"|"+e.payload}},{key:"decode",value:function(e){var t=e.split("|"),n=Object(s.a)(t,2),a=n[0],r=n[1];return a&&r?Ze(new $e(a,r)):et(Xe.INVALID_FORMAT)}}]),e}(),at=function(){function e(){Object($.a)(this,e),this.TYPE="VerifyOffer"}return Object(Z.a)(e,[{key:"encode",value:function(e){return new $e(this.TYPE,JSON.stringify(e))}},{key:"decode",value:function(e){if(e.type!==this.TYPE)return{status:Me.Unmatched};try{var t=JSON.parse(e.payload);return t.mid&&t.attribute_hash&&t.attribute_value?Ze(t):et(Xe.INVALID_PAYLOAD)}catch(n){return et(Xe.INVALID_FORMAT)}}}]),e}(),rt=new tt(new nt,[new at]);var it=function(e){var t=new nt;return function(n){return t.encode(e.encode(n))}}(new at),lt=function(e){var t=e.id,n=e.useReferenceQR,i=E().services,l=D().fromLanguageDict,c=V(Object(a.useMemo)((function(){return e=t,H((function(t){return B(t).find((function(t){return t.hash===e}))}),null);var e}),[t])),u=v((function(){return i.ipv8Service.api.getMyId().catch((function(e){return console.error(e)}))})),o=Object(a.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],h=function(e){return console.log("Peer called to verify "+(null===c||void 0===c?void 0:c.name),e)},p=function(e,t){var n=Object(a.useState)(""),r=Object(s.a)(n,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){var n=we.register(e);return n.onNewReference((function(e){return l(e.id)})),n.refreshAtInterval(t.refreshIntervalMillis),function(){return t.destroyOnUnmount?n.destroy():n.stopRefreshing()}}),[e]),i}(Object(a.useMemo)((function(){return h}),[u,c,d]),{refreshIntervalMillis:1e3}),b=u&&d?u+"|"+p:"",g=function(e){var t=Object(a.useState)(Date.now()),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){return setInterval((function(){return i(Date.now())}),e),function(){return clearInterval(null)}}),[]),r}(1e3);if(!n&&u){var y={mid:u,attribute_hash:c.hash,attribute_value:c.value,attribute_name:c.name,expiresAt:g+1e4};b=u&&d?it(y):""}return r.a.createElement("div",{className:"subpage nav-compact main-over-nav"},r.a.createElement(R,{pageTitle:"Credential",backUrl:"/"}),r.a.createElement("main",null,c?r.a.createElement(w,{title:l(c.title),issuerName:l(c.provider.title),imageUrl:c.provider.logo_url,withQRs:!0,onDisplayQR:function(e){return f(d===e?"":e)},qrValue:b,value:c.value,showDetails:!0,showMeta:!0,metadata:[{key:"Signed by",value:l(c.provider.title)},{key:"Created at",value:"".concat(c.time)},{key:"Valid until",value:"2020-09-01 13:20:00 CET"}]}):"Credential Unknown.."),r.a.createElement(Je,{showQR:!0}))},ct=function(e){var t=f().setOpen;return r.a.createElement(ut,Object.assign({openMenu:function(){return t(!0)}},e))},ut=function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:"./assets/images/user-colored.svg",alt:""})),r.a.createElement("div",{className:"text"},r.a.createElement("div",{className:"primary"},"Tim Speelman"),r.a.createElement("div",{className:"secondary"},"Self-Sovereign Identity")),r.a.createElement("div",{className:"burger-menu",onClick:e.openMenu},r.a.createElement(b,{bars:!0}))),r.a.createElement("div",{className:"background"})),r.a.createElement("div",{className:"after-header"}," "))},st=function(){var e=V(B),t=D().fromLanguageDict;return r.a.createElement("div",null,r.a.createElement(ct,null),r.a.createElement("main",null,r.a.createElement("h1",null,"Credentials"),e.map((function(e){return r.a.createElement(c.b,{to:"/detail/".concat(encodeURIComponent(e.hash)),key:e.hash},r.a.createElement(w,{imageUrl:e.provider.logo_url,title:t(e.title),issuerName:t(e.provider.title)}))}))),r.a.createElement(Je,{showQR:!0,showPlus:!0}))},ot=function(){var e=v((function(){return t.ipv8Service.api.getMyId().catch((function(e){return console.error(e)}))})),t=E().services,n=Object(a.useState)({attReqs:[],atts:[],verifReqs:[],verifs:[],peers:[]}),i=Object(s.a)(n,2),l=i[0],c=i[1];return Object(a.useEffect)((function(){var e=t.ipv8Service.observer,n=setInterval((function(){c({attReqs:e.attReqPoller.cache,atts:e.attPoller.cache,verifReqs:e.verifReqPoller.cache,verifs:e.verifPoller.cache,peers:e.peerPoller.cache})}),300);return function(){return clearInterval(n)}})),r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Debug Page",backUrl:"/"}),r.a.createElement("main",null,r.a.createElement("p",null,"My Id: ",e),r.a.createElement("h1",null,"Peers (",l.peers.length,")"),r.a.createElement("ul",null,l.peers.map((function(e){return r.a.createElement("li",null,"- ",e)}))),r.a.createElement("h1",null,"Attestations (",l.atts.length,")"),r.a.createElement("ul",null,l.atts.map((function(e){return r.a.createElement("li",null,"Hash: ",e.attribute_hash,r.a.createElement("br",null),"Name: ",e.attribute_name,r.a.createElement("br",null),"Meta: ",e.metadata,r.a.createElement("br",null),"Signer: ",e.signer_mid_b64,r.a.createElement("hr",null))}))),r.a.createElement("h1",null,"Incoming Attestations Requests (",l.attReqs.length,")"),r.a.createElement("ul",null,l.attReqs.map((function(e){return r.a.createElement("li",null,"Name: ",e.attribute_name,r.a.createElement("br",null),"Meta: ",e.metadata,r.a.createElement("br",null),"Subject Mid: ",e.mid_b64)}))),r.a.createElement("h1",null,"Verifications (",l.verifs.length,")"),r.a.createElement("ul",null,l.verifs.map((function(e){return r.a.createElement("li",null,"Attribute Hash: ",e.attribute_hash,r.a.createElement("br",null),"Value Hash: ",e.value_hash,r.a.createElement("br",null),"Probability: ",e.probability)}))),r.a.createElement("h1",null,"Incoming Verification Requests (",l.verifReqs.length,")"),r.a.createElement("ul",null,l.verifReqs.map((function(e){return r.a.createElement("li",null,"Attribute Name: ",e.attribute_name,r.a.createElement("br",null),"Verifier Mid: ",e.mid_b64)})))))},mt=n(55),dt=n.n(mt),ft=function(e){var t=e.onScanQR,n=Object(a.useState)(""),i=Object(s.a)(n,2),l=i[0],u=i[1],o=Object(a.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],v=Object(a.useState)(!1),h=Object(s.a)(v,2),E=h[0],p=h[1];return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(R,{pageTitle:"Scan QR",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Scan a QR"),E?r.a.createElement("form",{onSubmit:function(){return t(d)}},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("input",{type:"text",className:"text-input",placeholder:"Enter the QR value",required:!0,value:d,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O,{type:"submit",primary:!0},"Submit"),r.a.createElement(O,{onClick:function(){return p(!1)}},"Cancel"))):l?r.a.createElement("div",null,r.a.createElement("p",null,"I got this:"),r.a.createElement(N.a,{value:l,size:256,level:"M"}),r.a.createElement("p",null,"Meaning: ",r.a.createElement("code",null,l)),r.a.createElement(O,{primary:!0,onClick:function(){return t(l)}},"Submit"),r.a.createElement(O,{onClick:function(){return u("")}},"Try again")):r.a.createElement("div",null,r.a.createElement("p",null,"Find or draw a ",r.a.createElement(b,{qrcode:!0})," and scan it."),r.a.createElement(dt.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){e&&u(e)},style:{width:"100%"}}),r.a.createElement("p",{className:"clickable",onClick:function(){return p(!0)}},"Or try entering manually")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/"},r.a.createElement(O,null,"Never mind"))))},vt=function(){var e=E(),t=e.ready,n=e.error,a=Object(u.f)();return t?r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/debug"},r.a.createElement(ot,null)),r.a.createElement(u.a,{path:"/x"},r.a.createElement(q,null)),r.a.createElement(u.a,{path:"/create"},r.a.createElement(qe,null)),r.a.createElement(u.a,{path:"/verify/:offer"},r.a.createElement(ht,null)),r.a.createElement(u.a,{path:"/detail/:id"},r.a.createElement(Et,null)),r.a.createElement(u.a,{path:"/contacts/:mid"},r.a.createElement(pt,null)),r.a.createElement(u.a,{path:"/contacts"},r.a.createElement(ze,null)),r.a.createElement(u.a,{path:"/confirm-contact"},r.a.createElement(Ke,null)),r.a.createElement(u.a,{path:"/confirm-verify"},r.a.createElement(We,null)),r.a.createElement(u.a,{path:"/qr"},r.a.createElement(ft,{onScanQR:function(e){var t=rt.decode(e);t.status===Me.Succeeded&&a.push("/verify/"+encodeURIComponent(JSON.stringify(t.result)))}})),r.a.createElement(u.a,{path:"/"},r.a.createElement(st,null)))):n?r.a.createElement("div",null,"Oops! Is the localhost offline?"):r.a.createElement("div",null,"Connecting to services..")};function ht(){var e=Object(u.g)();return r.a.createElement(Le,{verifyOffer:JSON.parse(decodeURIComponent(e.offer))})}function Et(){var e=Object(u.g)();return r.a.createElement(lt,{id:decodeURIComponent(e.id)})}function pt(){var e=Object(u.g)();return r.a.createElement(Ye,{providerMid:decodeURIComponent(e.mid)})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var bt=r.a.createElement((function(e){var t=e.children,n=e.initServices,i=e.path,l=Object(a.useState)(null),c=Object(s.a)(l,2),u=c[0],o=c[1],m=Object(a.useState)(null),d=Object(s.a)(m,2),f=d[0],v=d[1];Object(a.useEffect)((function(){n().then((function(e){return o(e)})).catch(v)}),[]);var E={ready:!!u,error:f,services:u,path:i};return r.a.createElement(h.Provider,{value:E},t)}),{initServices:function(){return je.api.getMyId().then((function(e){console.log("TCL: mid",e),Ie=new de(Ne);var t=new ae.b.OWVerifiee(je.verifieeService),n=new ae.b.OWAttestee(je.attesteeService),a=new ae.c.RecipeClient(e,t,n);return Te=new me(Ie,Ne,je,a),{localAPI:ke,localState:Ne,ipv8Service:je,attributeService:Se,callbackService:we,providersService:Ie,owService:Te}}))},path:Oe},r.a.createElement((function(e){var t=e.children,n=Object(a.useState)(!1),i=Object(s.a)(n,2),l={open:i[0],setOpen:i[1]};return r.a.createElement(d.Provider,{value:l},t)}),null,r.a.createElement((function(e){var t,n=e.children,i=e.fallbackLangs,l=Object(a.useState)("nl_NL"),c=Object(s.a)(l,2),u=c[0],o={langCode:u,setLanguage:c[1],translate:function(e){return e},fromLanguageDict:(t=[u].concat(Object(I.a)(i)),function(e){var n=Object.keys(e),a=function(e,t){var n=t.find((function(t){return e.indexOf(t)>=0}));return n||e[0]}(n,t);return e[a]})};return r.a.createElement(T.Provider,{value:o},n)}),{fallbackLangs:["en_US","en_UK"]},r.a.createElement((function(e){var t=e.localState,n=e.children,i=Object(a.useState)(t.state),l=Object(s.a)(i,2),c=l[0],u=l[1];return Object(a.useEffect)((function(){t.stateChangeHook.on(u)}),[t]),r.a.createElement(P.Provider,{value:{state:c}},n)}),{localState:Ne},r.a.createElement((function(){return r.a.createElement(c.a,null,r.a.createElement(vt,null))}),null)))));l.a.render(bt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,n){},34:function(e,t,n){},58:function(e,t,n){e.exports=n(111)}},[[58,1,2]]]);
//# sourceMappingURL=main.7a863b58.chunk.js.map